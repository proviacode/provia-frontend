---
// Por qué elegirnos - Premium Section
---

<section id="porque-elegirnos" class="relative mt-16 sm:mt-24 md:mt-32 mb-16 sm:mb-24 md:mb-32 py-12 sm:py-16 md:py-24 overflow-hidden">
    <!-- Background gradient -->
    <div class="absolute inset-0 bg-gradient-to-b from-white via-[#F8FBFF] to-white opacity-60"></div>
    
    <div class="relative max-w-[1400px] mx-auto px-4 sm:px-6 md:px-8 lg:px-[80px]">
        <!-- Header Section -->
        <div class="text-center mb-12 sm:mb-16 md:mb-20">
            <div class="inline-flex items-center justify-center gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full bg-[#3FA9F5]/10 mb-4 sm:mb-6">
                <span class="w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-[#3FA9F5] animate-pulse"></span>
                <span class="text-[#3FA9F5] text-xs sm:text-sm font-medium uppercase tracking-wider">Ventajas Competitivas</span>
            </div>
            <h2 class="text-[clamp(28px,5vw,56px)] mb-4 sm:mb-6 leading-tight font-medium text-text">
                ¿Por qué elegirnos?
            </h2>
            <p class="text-text text-base sm:text-lg md:text-xl font-light leading-relaxed max-w-[800px] mx-auto px-2">
                Elegir trabajar desde la <span class="text-[#3FA9F5]">excelencia</span>, <span class="text-[#3FA9F5]">la innovación y la transparencia</span><br class="hidden md:block" />
                significa contar con un equipo <span class="text-[#3FA9F5]">profesional y orientado a resultados</span> comprometido con tu crecimiento.
            </p>
        </div>

        <!-- Carrusel de cards -->
        <div class="relative mb-12 sm:mb-16 max-w-2xl mx-auto" id="porqueCarousel">
            <!-- Track del carrusel -->
            <div class="overflow-hidden rounded-[20px]">
                <div id="porqueCarouselTrack" class="flex transition-transform duration-500 ease-[cubic-bezier(0.25,0.1,0.25,1)]" style="transform: translateX(0%);">
                    <!-- Card 1 -->
                    <div class="porque-slide w-full flex-shrink-0 px-2">
                        <div class="group relative bg-white rounded-[20px] p-5 sm:p-7 border border-[#E5E7EB] shadow-[0_4px_20px_rgba(0,0,0,0.04)] transition-all duration-500 overflow-hidden min-h-[160px] sm:min-h-[180px]">
                            <div class="relative z-10">
                                <div class="w-11 h-11 sm:w-12 sm:h-12 rounded-xl bg-gray-100 group-hover:bg-primary flex items-center justify-center mb-4 transition-colors duration-300">
                                    <svg class="w-5 h-5 sm:w-6 sm:h-6 text-gray-600 group-hover:text-white transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"/></svg>
                                </div>
                                <h3 class="text-lg sm:text-xl font-medium text-text mb-2 sm:mb-3">Nuestro equipo</h3>
                                <p class="text-[#808080] text-sm font-light leading-relaxed">Contamos con un equipo multidisciplinario con experiencia en diferentes sectores y áreas de gestión.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 2 -->
                    <div class="porque-slide w-full flex-shrink-0 px-2">
                        <div class="group relative bg-white rounded-[20px] p-5 sm:p-7 border border-[#E5E7EB] shadow-[0_4px_20px_rgba(0,0,0,0.04)] transition-all duration-500 overflow-hidden min-h-[160px] sm:min-h-[180px]">
                            <div class="relative z-10">
                                <div class="w-11 h-11 sm:w-12 sm:h-12 rounded-xl bg-gray-100 group-hover:bg-primary flex items-center justify-center mb-4 transition-colors duration-300">
                                    <svg class="w-5 h-5 sm:w-6 sm:h-6 text-gray-600 group-hover:text-white transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 7H4a1 1 0 00-1 1v10a1 1 0 001 1h16a1 1 0 001-1V8a1 1 0 00-1-1zM16 7V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v2"/></svg>
                                </div>
                                <h3 class="text-lg sm:text-xl font-medium text-text mb-2 sm:mb-3">Experiencia administrativa</h3>
                                <p class="text-[#808080] text-sm font-light leading-relaxed">Nos enfocamos en soluciones que generan resultados medibles y sostenibles para tu organización.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 3 -->
                    <div class="porque-slide w-full flex-shrink-0 px-2">
                        <div class="group relative bg-white rounded-[20px] p-5 sm:p-7 border border-[#E5E7EB] shadow-[0_4px_20px_rgba(0,0,0,0.04)] transition-all duration-500 overflow-hidden min-h-[160px] sm:min-h-[180px]">
                            <div class="relative z-10">
                                <div class="w-11 h-11 sm:w-12 sm:h-12 rounded-xl bg-gray-100 group-hover:bg-primary flex items-center justify-center mb-4 transition-colors duration-300">
                                    <svg class="w-5 h-5 sm:w-6 sm:h-6 text-gray-600 group-hover:text-white transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25A2.25 2.25 0 015.25 3h13.5A2.25 2.25 0 0121 5.25z"/></svg>
                                </div>
                                <h3 class="text-lg sm:text-xl font-medium text-text mb-2 sm:mb-3">Tecnologías de punta</h3>
                                <p class="text-[#808080] text-sm font-light leading-relaxed">Utilizamos herramientas y metodologías actualizadas que optimizan procesos y mejoran resultados.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 4 -->
                    <div class="porque-slide w-full flex-shrink-0 px-2">
                        <div class="group relative bg-white rounded-[20px] p-5 sm:p-7 border border-[#E5E7EB] shadow-[0_4px_20px_rgba(0,0,0,0.04)] transition-all duration-500 overflow-hidden min-h-[160px] sm:min-h-[180px]">
                            <div class="relative z-10">
                                <div class="w-11 h-11 sm:w-12 sm:h-12 rounded-xl bg-gray-100 group-hover:bg-primary flex items-center justify-center mb-4 transition-colors duration-300">
                                    <svg class="w-5 h-5 sm:w-6 sm:h-6 text-gray-600 group-hover:text-white transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"/></svg>
                                </div>
                                <h3 class="text-lg sm:text-xl font-medium text-text mb-2 sm:mb-3">Sostenibilidad e impacto</h3>
                                <p class="text-[#808080] text-sm font-light leading-relaxed">Nuestro compromiso es con el desarrollo sostenible y el impacto positivo en cada proyecto.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 5 -->
                    <div class="porque-slide w-full flex-shrink-0 px-2">
                        <div class="group relative bg-white rounded-[20px] p-5 sm:p-7 border border-[#E5E7EB] shadow-[0_4px_20px_rgba(0,0,0,0.04)] transition-all duration-500 overflow-hidden min-h-[160px] sm:min-h-[180px]">
                            <div class="relative z-10">
                                <div class="w-11 h-11 sm:w-12 sm:h-12 rounded-xl bg-gray-100 group-hover:bg-primary flex items-center justify-center mb-4 transition-colors duration-300">
                                    <svg class="w-5 h-5 sm:w-6 sm:h-6 text-gray-600 group-hover:text-white transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"/></svg>
                                </div>
                                <h3 class="text-lg sm:text-xl font-medium text-text mb-2 sm:mb-3">Metodología ágil</h3>
                                <p class="text-[#808080] text-sm font-light leading-relaxed">Nos adaptamos rápidamente a los cambios y trabajamos en ciclos de mejora continua.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 6 -->
                    <div class="porque-slide w-full flex-shrink-0 px-2">
                        <div class="group relative bg-white rounded-[20px] p-5 sm:p-7 border border-[#E5E7EB] shadow-[0_4px_20px_rgba(0,0,0,0.04)] transition-all duration-500 overflow-hidden min-h-[160px] sm:min-h-[180px]">
                            <div class="relative z-10">
                                <div class="w-11 h-11 sm:w-12 sm:h-12 rounded-xl bg-gray-100 group-hover:bg-primary flex items-center justify-center mb-4 transition-colors duration-300">
                                    <svg class="w-5 h-5 sm:w-6 sm:h-6 text-gray-600 group-hover:text-white transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"/></svg>
                                </div>
                                <h3 class="text-lg sm:text-xl font-medium text-text mb-2 sm:mb-3">Soporte continuo</h3>
                                <p class="text-[#808080] text-sm font-light leading-relaxed">Acompañamiento personalizado durante todo el proceso para garantizar el éxito de tu proyecto.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Controles: flechas + dots + contador -->
            <div class="flex items-center justify-between mt-6">
                <button type="button" id="porquePrevBtn" class="w-10 h-10 sm:w-11 sm:h-11 rounded-full border border-[#E5E7EB] bg-white flex items-center justify-center text-gray-400 hover:text-primary hover:border-primary/40 transition-all duration-200" aria-label="Anterior">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                </button>
                <div class="flex items-center gap-2">
                    <div id="porqueDots" class="flex items-center gap-1.5"></div>
                    <span id="porqueCounter" class="text-xs text-gray-400 font-light ml-2">1 / 6</span>
                </div>
                <button type="button" id="porqueNextBtn" class="w-10 h-10 sm:w-11 sm:h-11 rounded-full border border-[#E5E7EB] bg-white flex items-center justify-center text-gray-400 hover:text-primary hover:border-primary/40 transition-all duration-200" aria-label="Siguiente">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                </button>
            </div>
        </div>

        <!-- Stats Section -->
        <div id="porque-elegirnos-stats" class="grid grid-cols-2 sm:grid-cols-4 gap-4 sm:gap-6 md:gap-8 pt-8 sm:pt-12 border-t border-[#E5E7EB]">
            <div class="text-center">
                <div class="text-4xl md:text-5xl font-medium text-[#3FA9F5] mb-1 sm:mb-2">
                    <span class="counter" data-value="100" data-prefix="+" data-suffix="">0</span>
                </div>
                <div class="text-[#808080] text-xs sm:text-sm font-light">Clientes</div>
            </div>
            <div class="text-center">
                <div class="text-4xl md:text-5xl font-medium text-[#3FA9F5] mb-1 sm:mb-2">
                    <span class="counter" data-value="15" data-prefix="" data-suffix="+">0</span>
                </div>
                <div class="text-[#808080] text-xs sm:text-sm font-light">Años de experiencia</div>
            </div>
            <div class="text-center">
                <div class="text-4xl md:text-5xl font-medium text-[#3FA9F5] mb-1 sm:mb-2">
                    <span class="counter" data-value="100" data-prefix="" data-suffix="%">0</span>
                </div>
                <div class="text-[#808080] text-xs sm:text-sm font-light">Compromiso</div>
            </div>
            <div class="text-center">
                <div class="text-4xl md:text-5xl font-medium text-[#3FA9F5] mb-1 sm:mb-2">
                    <span class="counter" data-value="100" data-prefix="" data-suffix="%">0</span>
                </div>
                <div class="text-[#808080] text-xs sm:text-sm font-light">Excelencia</div>
            </div>
        </div>
    </div>
</section>

<script>
    // Carrusel "Por qué elegirnos"
    const porqueTrack = document.getElementById('porqueCarouselTrack');
    const porqueCarousel = document.getElementById('porqueCarousel');
    const porquePrevBtn = document.getElementById('porquePrevBtn');
    const porqueNextBtn = document.getElementById('porqueNextBtn');
    const porqueDotsContainer = document.getElementById('porqueDots');
    const porqueCounter = document.getElementById('porqueCounter');
    const porqueSlides = document.querySelectorAll('.porque-slide');
    const totalPorqueSlides = porqueSlides.length;
    let porqueIndex = 0;

    // Crear dots
    if (porqueDotsContainer) {
        for (let i = 0; i < totalPorqueSlides; i++) {
            const dot = document.createElement('button');
            dot.className = 'porque-dot w-2 h-2 rounded-full transition-all duration-300 ' + (i === 0 ? 'bg-primary w-5' : 'bg-gray-300');
            dot.setAttribute('aria-label', `Ir a slide ${i + 1}`);
            dot.addEventListener('click', () => { porqueIndex = i; updatePorqueCarousel(); });
            porqueDotsContainer.appendChild(dot);
        }
    }

    function updatePorqueCarousel() {
        if (!porqueTrack) return;
        porqueTrack.style.transform = `translateX(${-porqueIndex * 100}%)`;
        // Actualizar dots
        const dots = document.querySelectorAll('.porque-dot');
        dots.forEach((dot, i) => {
            if (i === porqueIndex) { dot.className = 'porque-dot w-5 h-2 rounded-full bg-primary transition-all duration-300'; }
            else { dot.className = 'porque-dot w-2 h-2 rounded-full bg-gray-300 transition-all duration-300'; }
        });
        // Actualizar contador
        if (porqueCounter) porqueCounter.textContent = `${porqueIndex + 1} / ${totalPorqueSlides}`;
    }

    if (porquePrevBtn) {
        porquePrevBtn.addEventListener('click', () => {
            porqueIndex = (porqueIndex - 1 + totalPorqueSlides) % totalPorqueSlides;
            updatePorqueCarousel();
        });
    }
    if (porqueNextBtn) {
        porqueNextBtn.addEventListener('click', () => {
            porqueIndex = (porqueIndex + 1) % totalPorqueSlides;
            updatePorqueCarousel();
        });
    }

    // Swipe en móvil
    if (porqueCarousel) {
        let startX = 0;
        let isDragging = false;
        porqueCarousel.addEventListener('touchstart', (e) => { startX = e.touches[0].clientX; isDragging = true; }, { passive: true });
        porqueCarousel.addEventListener('touchmove', (e) => { e.preventDefault(); }, { passive: false });
        porqueCarousel.addEventListener('touchend', (e) => {
            if (!isDragging) return;
            isDragging = false;
            const diff = e.changedTouches[0].clientX - startX;
            if (Math.abs(diff) > 50) {
                if (diff < 0) porqueIndex = (porqueIndex + 1) % totalPorqueSlides;
                else porqueIndex = (porqueIndex - 1 + totalPorqueSlides) % totalPorqueSlides;
                updatePorqueCarousel();
            }
        });
    }

    // Animación de contadores solo cuando la fila de estadísticas entra en vista
    const statsBlock = document.getElementById('porque-elegirnos-stats');
    const counters = statsBlock ? statsBlock.querySelectorAll('.counter') : [];
    let hasAnimated = false;

    function animateCounter(counter) {
        const target = parseInt(counter.getAttribute('data-value'));
        const prefix = counter.getAttribute('data-prefix') || '';
        const suffix = counter.getAttribute('data-suffix') || '';
        const duration = 2000;
        const increment = target / (duration / 16);
        let current = 0;

        const updateCounter = () => {
            current += increment;
            if (current < target) {
                counter.textContent = prefix + Math.floor(current) + suffix;
                requestAnimationFrame(updateCounter);
            } else {
                counter.textContent = prefix + target + suffix;
            }
        };

        updateCounter();
    }

    if (statsBlock && counters.length > 0) {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !hasAnimated) {
                    hasAnimated = true;
                    counters.forEach((counter, index) => {
                        setTimeout(() => {
                            animateCounter(counter);
                        }, index * 100);
                    });
                }
            });
        }, {
            threshold: 0.3
        });

        observer.observe(statsBlock);
    }
</script>
