---
import Layout from '../layouts/Layout.astro';
import Soluciones from '../components/soluciones.astro';
import QuienesSomos from '../components/quienes-somos.astro';
import NuestrosServicios from '../components/nuestros-servicios.astro';
import PorqueElegirnos from '../components/porque-elegirnos.astro';
import Contactanos from '../components/contactanos.astro';
import Header from '../components/header.astro';
import Footer from '../components/footer.astro';
---

<Layout>
	<main class="w-full px-[80px] pt-0 pb-14">
		<Header />

		<div class="mb-32 -mt-10">
			<Soluciones />
		</div>

		<!-- Sección: ¿Quiénes somos? -->
		<div class="mb-48 mt-56">
			<QuienesSomos />
		</div>

		<!-- Sección: Nuestros servicios -->
		<div class="mb-24 mt-24">
			<NuestrosServicios />
		</div>

		<!-- Sección: ¿Por qué elegirnos? -->
		<div class="mb-24">
			<PorqueElegirnos />
		</div>

		<!-- Sección: Contáctanos -->
		<div class="mb-24">
			<Contactanos />
		</div>
	</main>
	<Footer />
</Layout>

<script>
	// Carousel functionality
	const carousel = document.getElementById('servicesCarousel');
	const prevBtn = document.getElementById('prevBtn');
	const nextBtn = document.getElementById('nextBtn');
	const indicators = document.querySelectorAll('.carousel-indicator');
	
	let currentIndex = 0;
	const totalSlides = 3;

	function updateCarousel() {
		if (carousel) {
			const offset = -currentIndex * 100;
			carousel.style.transform = `translateX(${offset}%)`;
		}
		
		// Update indicators
		indicators.forEach((indicator, index) => {
			if (index === currentIndex) {
				indicator.classList.remove('bg-gray-300');
				indicator.classList.add('bg-primary');
			} else {
				indicator.classList.remove('bg-primary');
				indicator.classList.add('bg-gray-300');
			}
		});
	}

	if (prevBtn) {
		prevBtn.addEventListener('click', () => {
			currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
			updateCarousel();
		});
	}

	if (nextBtn) {
		nextBtn.addEventListener('click', () => {
			currentIndex = (currentIndex + 1) % totalSlides;
			updateCarousel();
		});
	}

	// Indicadores clickeables
	indicators.forEach((indicator) => {
		indicator.addEventListener('click', () => {
			const index = parseInt(indicator.getAttribute('data-index') || '0');
			currentIndex = index;
			updateCarousel();
		});
	});

	// Optional: Auto-play
	// setInterval(() => {
	// 	currentIndex = (currentIndex + 1) % totalSlides;
	// 	updateCarousel();
	// }, 5000);
</script>

<script src="/scripts/contact-form.js" is:inline></script>
