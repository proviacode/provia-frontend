---
import Layout from '../layouts/Layout.astro';
import Soluciones from '../components/soluciones.astro';
import QuienesSomos from '../components/quienes-somos.astro';
import NuestrosServicios from '../components/nuestros-servicios.astro';
import PorqueElegirnos from '../components/porque-elegirnos.astro';
import Contactanos from '../components/contactanos.astro';
import Header from '../components/header.astro';
---

<Layout>
	<main class="w-full max-w-[1400px] px-[80px] pt-7 pb-14">
		<Header />

		<Soluciones />

		<!-- Sección: ¿Quiénes somos? -->
		<QuienesSomos />

		<!-- Sección: Nuestros servicios -->
		<NuestrosServicios />

		<!-- Sección: ¿Por qué elegirnos? -->
		<PorqueElegirnos />

		<!-- Sección: Contáctanos -->
		<Contactanos />
	</main>
</Layout>

<script>
	// Carousel functionality
	const carousel = document.getElementById('servicesCarousel');
	const prevBtn = document.getElementById('prevBtn');
	const nextBtn = document.getElementById('nextBtn');
	const indicators = document.querySelectorAll('.carousel-indicator');
	
	let currentIndex = 0;
	const totalSlides = 3;

	function updateCarousel() {
		if (carousel) {
			const offset = -currentIndex * 100;
			carousel.style.transform = `translateX(${offset}%)`;
		}
		
		// Update indicators
		indicators.forEach((indicator, index) => {
			if (index === currentIndex) {
				indicator.classList.remove('bg-gray-300');
				indicator.classList.add('bg-primary');
			} else {
				indicator.classList.remove('bg-primary');
				indicator.classList.add('bg-gray-300');
			}
		});
	}

	if (prevBtn) {
		prevBtn.addEventListener('click', () => {
			currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
			updateCarousel();
		});
	}

	if (nextBtn) {
		nextBtn.addEventListener('click', () => {
			currentIndex = (currentIndex + 1) % totalSlides;
			updateCarousel();
		});
	}

	// Indicadores clickeables
	indicators.forEach((indicator) => {
		indicator.addEventListener('click', () => {
			const index = parseInt(indicator.getAttribute('data-index') || '0');
			currentIndex = index;
			updateCarousel();
		});
	});

	// Optional: Auto-play
	// setInterval(() => {
	// 	currentIndex = (currentIndex + 1) % totalSlides;
	// 	updateCarousel();
	// }, 5000);
</script>

<script src="/scripts/contact-form.js" is:inline></script>
